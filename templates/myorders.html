<!DOCTYPE html>
<html lang="en">

<head>
    {% include 'head.html' %}

    <title>Marketplace</title>
</head>

<body>
    {% include 'nav.html' %}

    <section id="Header" class="py-2">
        <div class="text-center">

        </div>
    </section>

    <!-- Implementing search bar with Vue -->
    <div id="app">
        <div class='container'>
            <div class="row">
                <div class="col-lg-4 col-md-6 col-sm-12">

                </div>
                <div class="col-lg-4 col-md-6 col-sm-12 text-center">
                    <h1>My Orders</h1>
                </div>
                <div class="col-lg-4 col-md-6 col-sm-12 text-center">
                    <div class="container">
                        <p>
                            <button class="btn btn-primary" type="button" data-bs-toggle="collapse"
                                data-bs-target="#collapseCart" aria-expanded="false" aria-controls="shopCollapse">
                                Show Cart
                            </button>
                        </p>
                        <input type='text' id='id' value="{{ session['data']['bid'] |tojson|safe }}" />



                    </div>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row" id="marketSpace">
                <div v-for="p in prodArr" class="col-lg-4 col-md-6 mb-3 d-flex justify-content-center text-center">

                </div>
            </div>

        </div>

    </div>
    <script>
        var id_session = String(document.getElementById("id").value);
        let totalCostDisp = document.getElementById("totalCost")
        // totalCostDisp.innerText = "Your current total is " + 10;

        var app = new Vue({
            el: "#app",
            data: {
                sKey: "",
                prodArr: [],
                cart: [],
                total: 0,
                id: id_session
            },
            delimiters: ["((", "))"],
            async mounted() {
                // anonymous async function 
                // - using await requires the function that calls it to be async

                try {
                    var id_session = String(document.getElementById("id").value);
                    console.log(id_session);
                    var response = await axios.get("http://localhost:5100/check_order_biz/" + id)
                    console.log(response.data.data.products)
                    // this.prodArr = response.data.data
                } catch (error) {
                    console.log(error)
                }
            },
        });
    </script>


    {% include 'footer.html' %}



</body>

</html>